###############################################################################
#  Server
###############################################################################
server.port=8080
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}
###############################################################################
#  Datasource  (PostgreSQL example ? adjust if you use another DB)
###############################################################################
spring.datasource.url=jdbc:mariadb://localhost:3306/library
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# H2 Database Configuration
#spring.datasource.url=jdbc:h2:mem:testdb
#spring.datasource.driverClassName=org.h2.Driver
#spring.datasource.username=sa
#spring.datasource.password=
#spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Enable H2 console for browser-based database UI
#spring.h2.console.enabled=true
#spring.h2.console.path=/h2-console

###############################################################################
#  JPA / Hibernate
###############################################################################
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

###############################################################################
#  JWT  (used by spring-security-oauth2-resource-server)
###############################################################################
# For HMAC-signed tokens.  If you use RSA, replace with:
# spring.security.oauth2.resourceserver.jwt.public-key-location=classpath:public.pem
jwt.secret=yourStrongSecretKeyHereItShouldBeAtLeast256BitsLong
jwt.expiration-ms=86400000
jwt.issuer=MB-Transaction-Backend


###############################################################################
#  Cache (Caffeine)
###############################################################################
spring.cache.type=caffeine
spring.cache.cache-names=books,borrowers,loans,users
spring.cache.caffeine.spec=maximumSize=500,expireAfterAccess=1h

###############################################################################
#  Rate-Limit  (consumed by RateLimitConfig through @ConfigurationProperties)
###############################################################################
ratelimit.enabled=true
ratelimit.requests=100
ratelimit.duration=1m

###############################################################################
#  Actuator / Micrometer
###############################################################################
management.endpoints.web.exposure.include=health,info,prometheus
management.metrics.tags.application=transaction-backend

###############################################################################
#  Swagger / OpenAPI (springdoc-openapi)
###############################################################################
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

###############################################################################
#  Logging
###############################################################################
logging.level.org.springframework.security=INFO
logging.level.com.mb.transactionbackend=DEBUG